<!DOCTYPE html>
<html lang='en'>
<head>
<meta charset='utf-8' />
<title>DisassemblyDiagnoser Output dotNetTips.Utility.Benchmarks.IO.FileHelperPerfTestRunner-20210228-170020</title>

<style type="text/css">
    table { border-collapse: collapse; display: block; width: 100%; overflow: auto; }
    td, th { padding: 6px 13px; border: 1px solid #ddd; text-align: left; }
    tr { background-color: #fff; border-top: 1px solid #ccc; }
    tr:nth-child(even) { background: #f8f8f8; }
</style>
</head>
<body>
<table>
<thead>
<tr><th colspan="5">dotNetTips.Utility.Benchmarks.IO.FileHelperPerfTestRunner-20210228-170020</th></tr>
<tr>
<th>CopyFileTest .NET Core 3.1.12 (CoreCLR 4.700.21.6504, CoreFX 4.700.21.6905), X64 RyuJIT</th>
<th>CopyFileAsyncTest .NET Core 3.1.12 (CoreCLR 4.700.21.6504, CoreFX 4.700.21.6905), X64 RyuJIT</th>
<th>DeleteFilesTest .NET Core 3.1.12 (CoreCLR 4.700.21.6504, CoreFX 4.700.21.6905), X64 RyuJIT</th>
<th>FileHasInvalidCharsTest .NET Core 3.1.12 (CoreCLR 4.700.21.6504, CoreFX 4.700.21.6905), X64 RyuJIT</th>
<th>MoveFileTest .NET Core 3.1.12 (CoreCLR 4.700.21.6504, CoreFX 4.700.21.6905), X64 RyuJIT</th>
</tr>
</thead>
<tbody>
<tr>
<td style="vertical-align:top;"><pre><code>
dotNetTips.Utility.Benchmarks.IO.FileHelperPerfTestRunner.CopyFileTest()
            DirectoryInfo destPath = this._tempFolder;
            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
            FileInfo tempFile = this._tempFiles.PickRandom();
            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
            var result = FileHelper.CopyFile(tempFile, destPath);
            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
            base.Consumer.Consume(result);
            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
push      rdi
push      rsi
sub       rsp,28
mov       rsi,rcx
mov       rdi,[rsi+28]
mov       rdx,[rsi+30]
mov       rcx,offset MD_dotNetTips.Utility.Standard.Extensions.CollectionExtensions.PickRandom(System.Collections.Generic.IEnumerable`1<!!0>)
call      dotNetTips.Utility.Standard.Extensions.CollectionExtensions.PickRandom[[System.__Canon, System.Private.CoreLib]](System.Collections.Generic.IEnumerable`1<System.__Canon>)
mov       rcx,rax
mov       rdx,rdi
call      dotNetTips.Utility.Standard.IO.FileHelper.CopyFile(System.IO.FileInfo, System.IO.DirectoryInfo)
mov       rdx,[rsi+8]
mov       ecx,[rdx]
add       rdx,20
mov       [rdx],rax
add       rsp,28
pop       rsi
pop       rdi
ret

dotNetTips.Utility.Standard.Extensions.CollectionExtensions.PickRandom[[System.__Canon, System.Private.CoreLib]](System.Collections.Generic.IEnumerable`1<System.__Canon>)
            var index = new Random().Next(0, list.Count() - 1);
            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
            return list.ElementAt(index);
            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
push      rdi
push      rsi
push      rbx
sub       rsp,30
mov       [rsp+28],rcx
mov       rsi,rcx
mov       rdi,rdx
mov       rcx,offset MT_System.Random
call      CORINFO_HELP_NEWSFAST
mov       rbx,rax
call      System.Random.GenerateSeed()
mov       edx,eax
mov       rcx,rbx
call      System.Random..ctor(Int32)
mov       rcx,rdi
call      dotNetTips.Utility.Standard.Extensions.CollectionExtensions.Count(System.Collections.IEnumerable)
lea       r8d,[rax+0FFFF]
mov       rcx,rbx
xor       edx,edx
call      qword ptr [7FFF60C3E0B8]
mov       ebx,eax
mov       rcx,[rsi+10]
mov       rcx,[rcx+8]
test      rcx,rcx
jne       short 00007FFF60C365FE
mov       rcx,rsi
mov       rdx,7FFF60CADB60
call      CORINFO_HELP_RUNTIMEHANDLE_METHOD
mov       rcx,rax
mov       rdx,rdi
mov       r8d,ebx
mov       rax,offset System.Linq.Enumerable.ElementAt[[System.__Canon, System.Private.CoreLib]](System.Collections.Generic.IEnumerable`1<System.__Canon>, Int32)
add       rsp,30
pop       rbx
pop       rsi
pop       rdi
jmp       rax

dotNetTips.Utility.Standard.IO.FileHelper.CopyFile(System.IO.FileInfo, System.IO.DirectoryInfo)
            Encapsulation.TryValidateParam(file, nameof(file));
            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
            Encapsulation.TryValidateParam(destinationFolder, nameof(destinationFolder));
            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
            var newFileName = Path.Combine(destinationFolder.FullName, file.Name);
            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
            using (var sourceStream = File.Open(file.FullName, FileMode.Open))
                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
                if (File.Exists(newFileName))
                ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
                    File.Delete(newFileName);
                    ^^^^^^^^^^^^^^^^^^^^^^^^^
                using (var destinationStream = File.Create(newFileName))
                       ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
                    sourceStream.CopyTo(destinationStream);
                    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
                    destinationStream.Flush();
                    ^^^^^^^^^^^^^^^^^^^^^^^^^^
            return file.Length;
            ^^^^^^^^^^^^^^^^^^^
push      rbp
push      r14
push      rdi
push      rsi
push      rbx
sub       rsp,50
lea       rbp,[rsp+70]
xor       eax,eax
mov       [rbp+0FFD8],rax
mov       [rbp+0FFC8],rsp
mov       rsi,rcx
mov       rdi,rdx
mov       r8,1B02D063060
mov       r8,[r8]
mov       rdx,1B00D0618A0
mov       rdx,[rdx]
mov       rcx,rsi
call      dotNetTips.Utility.Standard.OOP.Encapsulation.TryValidateParam(System.IO.FileInfo, System.String, System.String)
mov       r8,1B02D063060
mov       r8,[r8]
mov       rdx,1B00D0618A8
mov       rdx,[rdx]
mov       rcx,rdi
call      dotNetTips.Utility.Standard.OOP.Encapsulation.TryValidateParam(System.IO.DirectoryInfo, System.String, System.String)
mov       rcx,[rdi+8]
mov       rdx,[rsi+18]
call      System.IO.Path.Combine(System.String, System.String)
mov       rdi,rax
mov       rbx,[rsi+8]
mov       rcx,offset MT_System.IO.FileStream
call      CORINFO_HELP_NEWFAST
mov       r14,rax
mov       rdx,rbx
xor       ecx,ecx
mov       [rsp+20],ecx
mov       dword ptr [rsp+28],1000
mov       [rsp+30],ecx
mov       rcx,r14
mov       r8d,3
mov       r9d,3
call      System.IO.FileStream..ctor(System.String, System.IO.FileMode, System.IO.FileAccess, System.IO.FileShare, Int32, System.IO.FileOptions)
mov       [rbp+0FFD8],r14
mov       rcx,rdi
call      System.IO.File.Exists(System.String)
test      eax,eax
je        short 00007FFF60C3724A
mov       rcx,rdi
call      System.IO.File.Delete(System.String)
mov       rcx,offset MT_System.IO.FileStream
call      CORINFO_HELP_NEWFAST
mov       rbx,rax
mov       rdx,rdi
xor       ecx,ecx
mov       [rsp+20],ecx
mov       dword ptr [rsp+28],1000
mov       [rsp+30],ecx
mov       rcx,rbx
mov       r8d,2
mov       r9d,3
call      System.IO.FileStream..ctor(System.String, System.IO.FileMode, System.IO.FileAccess, System.IO.FileShare, Int32, System.IO.FileOptions)
mov       [rbp+0FFD0],rbx
mov       rcx,[rbp+0FFD8]
call      System.IO.Stream.GetCopyBufferSize()
mov       r8d,eax
mov       rcx,[rbp+0FFD8]
mov       rdx,[rbp+0FFD0]
call      qword ptr [7FFF60C46628]
mov       rcx,[rbp+0FFD0]
call      qword ptr [7FFF60C469E0]
nop
mov       rcx,[rbp+0FFD0]
call      qword ptr [7FFF60C46638]
nop
mov       rcx,[rbp+0FFD8]
call      qword ptr [7FFF60C46638]
mov       rcx,rsi
mov       rax,offset System.IO.FileInfo.get_Length()
lea       rsp,[rbp+0FFE0]
pop       rbx
pop       rsi
pop       rdi
pop       r14
pop       rbp
jmp       rax
push      rbp
push      r14
push      rdi
push      rsi
push      rbx
sub       rsp,40
mov       rbp,[rcx+38]
mov       [rsp+38],rbp
lea       rbp,[rbp+70]
cmp       qword ptr [rbp+0FFD0],0
je        short 00007FFF60C37305
mov       rcx,[rbp+0FFD0]
call      qword ptr [7FFF60C46638]
nop
add       rsp,40
pop       rbx
pop       rsi
pop       rdi
pop       r14
pop       rbp
ret
push      rbp
push      r14
push      rdi
push      rsi
push      rbx
sub       rsp,40
mov       rbp,[rcx+38]
mov       [rsp+38],rbp
lea       rbp,[rbp+70]
cmp       qword ptr [rbp+0FFD8],0
je        short 00007FFF60C37339
mov       rcx,[rbp+0FFD8]
call      qword ptr [7FFF60C46638]
nop
add       rsp,40
pop       rbx
pop       rsi
pop       rdi
pop       r14
pop       rbp
ret

</code></pre></td>
<td style="vertical-align:top;"><pre><code>
dotNetTips.Utility.Benchmarks.IO.FileHelperPerfTestRunner.CopyFileAsyncTest()
push      rdi
push      rsi
sub       rsp,48
mov       rsi,rcx
lea       rdi,[rsp+20]
mov       ecx,0A
xor       eax,eax
rep stosd
mov       rcx,rsi
xor       eax,eax
mov       [rsp+30],rax
mov       [rsp+20],rcx
mov       dword ptr [rsp+28],0FFFFFFFF
lea       rcx,[rsp+20]
call      System.Runtime.CompilerServices.AsyncMethodBuilderCore.Start[[dotNetTips.Utility.Benchmarks.IO.FileHelperPerfTestRunner+<CopyFileAsyncTest>d__5, dotNetTips.Utility.Benchmarks]](<CopyFileAsyncTest>d__5 ByRef)
mov       rax,[rsp+30]
test      rax,rax
jne       short 00007FFF60C389FC
lea       rcx,[rsp+30]
call      System.Runtime.CompilerServices.AsyncTaskMethodBuilder`1[[System.Threading.Tasks.VoidTaskResult, System.Private.CoreLib]].InitializeTaskAsPromise()
nop
add       rsp,48
pop       rsi
pop       rdi
ret

System.Threading.Tasks.Task.GetAwaiter()
mov       rax,rcx
ret

System.Runtime.CompilerServices.TaskAwaiter.GetResult()
mov       rcx,[rcx]
mov       eax,[rcx+34]
and       eax,11000000
cmp       eax,1000000
je        short 00007FFF60C3499F
mov       rax,offset System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(System.Threading.Tasks.Task)
jmp       rax
ret

System.Runtime.CompilerServices.AsyncMethodBuilderCore.Start[[dotNetTips.Utility.Benchmarks.IO.FileHelperPerfTestRunner+<CopyFileAsyncTest>d__5, dotNetTips.Utility.Benchmarks]](<CopyFileAsyncTest>d__5 ByRef)
push      rbp
push      rsi
sub       rsp,48
lea       rbp,[rsp+50]
mov       [rbp+0FFD0],rsp
mov       rsi,rcx
movsx     rcx,byte ptr [rsi]
mov       rcx,7FFF60910020
mov       edx,1E2
call      CORINFO_HELP_GETSHARED_GCTHREADSTATIC_BASE
mov       rax,[rax+8]
test      rax,rax
jne       short 00007FFF60C38A98
call      System.Threading.Thread.InitializeCurrentThread()
mov       [rbp+0FFF0],rax
mov       rcx,[rax+8]
mov       [rbp+0FFE8],rcx
mov       rcx,[rax+10]
mov       [rbp+0FFE0],rcx
mov       rcx,rsi
call      dotNetTips.Utility.Benchmarks.IO.FileHelperPerfTestRunner+<CopyFileAsyncTest>d__5.MoveNext()
nop
mov       rdx,[rbp+0FFE0]
mov       rsi,[rbp+0FFF0]
mov       rcx,[rbp+0FFE0]
mov       rax,[rbp+0FFF0]
cmp       rcx,[rax+10]
je        short 00007FFF60C38AD4
lea       rcx,[rsi+10]
call      CORINFO_HELP_ASSIGN_REF
mov       rdx,[rbp+0FFE8]
mov       r8,[rsi+8]
cmp       [rbp+0FFE8],r8
je        short 00007FFF60C38AEA
mov       rcx,rsi
call      System.Threading.ExecutionContext.RestoreChangedContextToThread(System.Threading.Thread, System.Threading.ExecutionContext, System.Threading.ExecutionContext)
nop
lea       rsp,[rbp+0FFF8]
pop       rsi
pop       rbp
ret
push      rbp
push      rsi
sub       rsp,28
mov       rbp,[rcx+20]
mov       [rsp+20],rbp
lea       rbp,[rbp+50]
mov       rdx,[rbp+0FFE0]
mov       rsi,[rbp+0FFF0]
mov       rcx,[rbp+0FFE0]
mov       rax,[rbp+0FFF0]
cmp       rcx,[rax+10]
je        short 00007FFF60C38B24
lea       rcx,[rsi+10]
call      CORINFO_HELP_ASSIGN_REF
mov       rdx,[rbp+0FFE8]
mov       r8,[rsi+8]
cmp       [rbp+0FFE8],r8
je        short 00007FFF60C38B3A
mov       rcx,rsi
call      System.Threading.ExecutionContext.RestoreChangedContextToThread(System.Threading.Thread, System.Threading.ExecutionContext, System.Threading.ExecutionContext)
nop
add       rsp,28
pop       rsi
pop       rbp
ret

System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(System.Threading.Tasks.Task)
push      rsi
sub       rsp,20
mov       rsi,rcx
mov       ecx,[rsi+34]
test      ecx,1600000
jne       short 00007FFF60C349D3
mov       rcx,rsi
xor       r8d,r8d
mov       edx,0FFFFFFFF
call      System.Threading.Tasks.Task.InternalWaitCore(Int32, System.Threading.CancellationToken)
mov       rcx,rsi
call      System.Threading.Tasks.Task.NotifyDebuggerOfWaitCompletionIfNecessary()
mov       ecx,[rsi+34]
and       ecx,1600000
cmp       ecx,1000000
je        short 00007FFF60C349F4
mov       rcx,rsi
call      System.Runtime.CompilerServices.TaskAwaiter.ThrowForNonSuccess(System.Threading.Tasks.Task)
nop
add       rsp,20
pop       rsi
ret

Method was not JITted yet.
System.Runtime.CompilerServices.AsyncTaskMethodBuilder`1[[System.Threading.Tasks.VoidTaskResult, System.Private.CoreLib]].InitializeTaskAsPromise()

</code></pre></td>
<td style="vertical-align:top;"><pre><code>
dotNetTips.Utility.Benchmarks.IO.FileHelperPerfTestRunner.DeleteFilesTest()
            (string Path, IEnumerable<string> Files) files = RandomData.GenerateFiles(100, 10);
            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
            IEnumerable<(string FileName, string ErrorMessage)> errors = FileHelper.DeleteFiles(files.Files);
            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
            base.Consumer.Consume(errors);
            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
push      rsi
sub       rsp,30
xor       eax,eax
mov       [rsp+20],rax
mov       [rsp+28],rax
mov       rsi,rcx
lea       rcx,[rsp+20]
mov       edx,64
mov       r8d,0A
call      dotNetTips.Utility.Standard.Tester.RandomData.GenerateFiles(Int32, Int32)
mov       rcx,[rsp+28]
call      dotNetTips.Utility.Standard.IO.FileHelper.DeleteFiles(System.Collections.Generic.IEnumerable`1<System.String>)
mov       rcx,[rsi+8]
mov       edx,[rcx]
add       rcx,10
mov       rdx,rax
call      CORINFO_HELP_CHECKED_ASSIGN_REF
nop
add       rsp,30
pop       rsi
ret

dotNetTips.Utility.Standard.Tester.RandomData.GenerateFiles(Int32, Int32)
push      r14
push      rdi
push      rsi
push      rbp
push      rbx
sub       rsp,20
mov       rbx,rcx
mov       esi,edx
mov       edi,r8d
            Encapsulation.TryValidateParam(count, 1, int.MaxValue, nameof(count));
            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
mov       rcx,1F1C0003060
mov       rbp,[rcx]
mov       r14,rbp
test      esi,esi
jle       near ptr 00007FFF60C0BBE0
cmp       esi,7FFFFFFF
setle     cl
movzx     ecx,cl
test      ecx,ecx
je        near ptr 00007FFF60C0BBE0
            Encapsulation.TryValidateParam(fileLength, 1, int.MaxValue, nameof(fileLength));
            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
test      edi,edi
jle       near ptr 00007FFF60C0BC29
cmp       edi,7FFFFFFF
setle     cl
movzx     ecx,cl
test      ecx,ecx
je        near ptr 00007FFF60C0BC29
            var files = new List<string>(count);
            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
mov       rcx,offset MT_System.Collections.Generic.List`1[[System.String, System.Private.CoreLib]]
call      CORINFO_HELP_NEWSFAST
mov       r14,rax
mov       rcx,r14
mov       edx,esi
call      System.Collections.Generic.List`1[[System.__Canon, System.Private.CoreLib]]..ctor(Int32)
            for (var fileCount = 0; fileCount < count; fileCount++)
                 ^^^^^^^^^^^^^^^^^
xor       ebp,ebp
test      esi,esi
jle       short 00007FFF60C0BBA9
mov       ecx,edi
call      dotNetTips.Utility.Standard.Tester.RandomData.GenerateTempFile(Int32)
mov       r8,rax
inc       dword ptr [r14+14]
mov       rcx,[r14+8]
mov       edx,[r14+10]
cmp       [rcx+8],edx
jbe       short 00007FFF60C0BBD3
lea       eax,[rdx+1]
mov       [r14+10],eax
call      CORINFO_HELP_ARRADDR_ST
inc       ebp
cmp       ebp,esi
jl        short 00007FFF60C0BB7C
call      System.IO.Path.GetTempPath()
mov       rdx,rax
            return (Path.GetTempPath(), files.AsEnumerable());
            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
mov       rcx,rbx
call      CORINFO_HELP_CHECKED_ASSIGN_REF
lea       rcx,[rbx+8]
mov       rdx,r14
call      CORINFO_HELP_CHECKED_ASSIGN_REF
mov       rax,rbx
add       rsp,20
pop       rbx
pop       rbp
pop       rsi
pop       rdi
pop       r14
ret
mov       rcx,r14
mov       rdx,r8
call      System.Collections.Generic.List`1[[System.__Canon, System.Private.CoreLib]].AddWithResize(System.__Canon)
jmp       short 00007FFF60C0BBA3
test      r14,r14
jne       short 00007FFF60C0BBED
call      dotNetTips.Utility.Standard.Properties.Resources.get_NumberNotInRange()
mov       r14,rax
mov       rcx,offset MT_System.ArgumentOutOfRangeException
call      CORINFO_HELP_NEWSFAST
mov       rsi,rax
mov       ecx,1
mov       rdx,7FFF60BE26A8
call      CORINFO_HELP_STRCNS
mov       r8,rax
mov       rdx,r14
mov       rcx,rsi
call      System.ArgumentOutOfRangeException..ctor(System.String, System.String)
mov       rcx,rsi
call      CORINFO_HELP_THROW
test      rbp,rbp
jne       short 00007FFF60C0BC36
call      dotNetTips.Utility.Standard.Properties.Resources.get_NumberNotInRange()
mov       rbp,rax
mov       rcx,offset MT_System.ArgumentOutOfRangeException
call      CORINFO_HELP_NEWSFAST
mov       rsi,rax
mov       ecx,2F
mov       rdx,7FFF60BE26A8
call      CORINFO_HELP_STRCNS
mov       r8,rax
mov       rdx,rbp
mov       rcx,rsi
call      System.ArgumentOutOfRangeException..ctor(System.String, System.String)
mov       rcx,rsi
call      CORINFO_HELP_THROW
int       3

dotNetTips.Utility.Standard.IO.FileHelper.DeleteFiles(System.Collections.Generic.IEnumerable`1<System.String>)
            if (files.HasItems() == false)
            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
                return null;
                ^^^^^^^^^^^^
            var errors = new List<(string FileName, string ErrorMessage)>();
            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
            var result = Parallel.ForEach(source: files, body: (fileName) =>
            ^^^
            {
            ^^^
                try
            ^^^
                {
            ^^^
                    File.Delete(fileName);
            ^^^
                }
            ^^^
                catch (Exception ex) when (ex is ArgumentException ||
            ^^^
                  ex is ArgumentNullException ||
            ^^^
                  ex is System.IO.DirectoryNotFoundException ||
            ^^^
                  ex is IOException ||
            ^^^
                  ex is NotSupportedException ||
            ^^^
                  ex is PathTooLongException ||
            ^^^
                  ex is UnauthorizedAccessException)
            ^^^
                {
            ^^^
                    errors.Add((FileName: fileName, ErrorMessage: ex.GetAllMessages()));
            ^^^
                }
            ^^^
            });
            ^^^
            return errors.AsEnumerable();
            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
push      rdi
push      rsi
push      rbx
sub       rsp,40
xor       eax,eax
mov       [rsp+28],rax
mov       [rsp+30],rax
mov       [rsp+38],rax
mov       rsi,rcx
mov       rcx,offset MT_dotNetTips.Utility.Standard.IO.FileHelper+<>c__DisplayClass6_0
call      CORINFO_HELP_NEWSFAST
mov       rdi,rax
test      rsi,rsi
je        short 00007FFF60C1DDB6
mov       rcx,rsi
call      dotNetTips.Utility.Standard.Extensions.CollectionExtensions.Count(System.Collections.IEnumerable)
test      eax,eax
setg      al
movzx     eax,al
test      eax,eax
jne       short 00007FFF60C1DDC0
xor       eax,eax
add       rsp,40
pop       rbx
pop       rsi
pop       rdi
ret
mov       rcx,offset MT_System.Collections.Generic.List`1[[System.ValueTuple`2[[System.String, System.Private.CoreLib],[System.String, System.Private.CoreLib]], System.Private.CoreLib]]
call      CORINFO_HELP_NEWSFAST
mov       rbx,rax
mov       rdx,1F1C0008D40
mov       rdx,[rdx]
lea       rcx,[rbx+8]
call      CORINFO_HELP_ASSIGN_REF
lea       rcx,[rdi+8]
mov       rdx,rbx
call      CORINFO_HELP_ASSIGN_REF
mov       rcx,offset MT_System.Action`1[[System.String, System.Private.CoreLib]]
call      CORINFO_HELP_NEWSFAST
mov       rbx,rax
lea       rcx,[rbx+8]
mov       rdx,rdi
call      CORINFO_HELP_ASSIGN_REF
mov       rcx,offset dotNetTips.Utility.Standard.IO.FileHelper+<>c__DisplayClass6_0.<DeleteFiles>b__0(System.String)
mov       [rbx+18],rcx
lea       rcx,[rsp+28]
mov       r9,rbx
mov       r8,rsi
mov       rdx,offset MD_System.Threading.Tasks.Parallel.ForEach(System.Collections.Generic.IEnumerable`1<!!0>, System.Action`1<!!0>)
call      System.Threading.Tasks.Parallel.ForEach[[System.__Canon, System.Private.CoreLib]](System.Collections.Generic.IEnumerable`1<System.__Canon>, System.Action`1<System.__Canon>)
mov       rax,[rdi+8]
add       rsp,40
pop       rbx
pop       rsi
pop       rdi
ret

</code></pre></td>
<td style="vertical-align:top;"><pre><code>
dotNetTips.Utility.Benchmarks.IO.FileHelperPerfTestRunner.FileHasInvalidCharsTest()
            var destFile = RandomData.GenerateRandomFileName();
            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
            base.Consumer.Consume(FileHelper.FileHasInvalidChars(destFile));
            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
push      rdi
push      rsi
sub       rsp,28
mov       rsi,rcx
call      System.IO.Path.GetTempPath()
mov       rdi,rax
call      System.IO.Path.GetRandomFileName()
mov       rdx,rax
mov       rcx,rdi
call      System.IO.Path.Combine(System.String, System.String)
mov       rcx,rax
mov       rsi,[rsi+8]
call      dotNetTips.Utility.Standard.IO.FileHelper.FileHasInvalidChars(System.String)
movzx     eax,al
mov       [rsi+44],al
add       rsp,28
pop       rsi
pop       rdi
ret

System.IO.Path.GetTempPath()
push      rbp
push      rdi
push      rsi
sub       rsp,50
vzeroupper
lea       rbp,[rsp+20]
xor       eax,eax
mov       [rbp+10],rax
mov       [rbp+20],rax
mov       rax,0CFEEDC581910
mov       [rbp+8],rax
add       rsp,20
test      esp,[rsp]
sub       rsp,210
sub       rsp,20
lea       rcx,[rsp+20]
xor       eax,eax
mov       [rbp+10],rax
lea       rax,[rbp+20]
mov       [rax],rcx
mov       dword ptr [rax+8],104
xor       ecx,ecx
mov       [rbp+18],ecx
lea       rcx,[rbp+10]
call      System.IO.Path.GetTempPath(System.Text.ValueStringBuilder ByRef)
lea       rcx,[rbp+10]
call      System.IO.PathHelper.Normalize(System.Text.ValueStringBuilder ByRef)
mov       rsi,rax
mov       rdi,[rbp+10]
lea       rcx,[rbp+10]
vxorps    xmm0,xmm0,xmm0
vmovdqu   xmmword ptr [rcx],xmm0
vmovdqu   xmmword ptr [rcx+10],xmm0
test      rdi,rdi
je        short 00007FFF60C32035
mov       rcx,7FFF60920020
mov       edx,27
call      CORINFO_HELP_CLASSINIT_SHARED_DYNAMICCLASS
mov       rcx,1DF622B8D40
mov       rcx,[rcx]
mov       rdx,rdi
xor       r8d,r8d
cmp       [rcx],ecx
call      qword ptr [7FFF60C401F8]
mov       rax,rsi
mov       rcx,0CFEEDC581910
cmp       [rbp+8],rcx
je        short 00007FFF60C3204D
call      CORINFO_HELP_FAIL_FAST
nop
lea       rsp,[rbp+30]
pop       rsi
pop       rdi
pop       rbp
ret

System.IO.Path.GetRandomFileName()
push      rdi
push      rsi
sub       rsp,38
mov       rax,0CFEEDC581910
mov       [rsp+30],rax
lea       rsi,[rsp+28]
mov       rcx,rsi
mov       edx,8
call      Interop.GetRandomBytes(Byte*, Int32)
mov       rcx,1DF622B22F0
mov       r8,[rcx]
test      r8,r8
jne       short 00007FFF60C32749
mov       rcx,offset MT_System.Buffers.SpanAction`2[[System.Char, System.Private.CoreLib],[System.IntPtr, System.Private.CoreLib]]
call      CORINFO_HELP_NEWSFAST
mov       rdi,rax
mov       rdx,1DF622B22E8
mov       rdx,[rdx]
test      rdx,rdx
je        short 00007FFF60C32774
lea       rcx,[rdi+8]
call      CORINFO_HELP_ASSIGN_REF
mov       rdx,offset System.IO.Path+<>c.<GetRandomFileName>b__16_0(System.Span`1<Char>, IntPtr)
mov       [rdi+18],rdx
mov       rcx,1DF622B22F0
mov       rdx,rdi
call      CORINFO_HELP_CHECKED_ASSIGN_REF
mov       r8,rdi
mov       ecx,0C
mov       rdx,rsi
call      System.String.Create[[System.IntPtr, System.Private.CoreLib]](Int32, IntPtr, System.Buffers.SpanAction`2<Char,IntPtr>)
mov       rcx,0CFEEDC581910
cmp       [rsp+30],rcx
je        short 00007FFF60C3276C
call      CORINFO_HELP_FAIL_FAST
nop
add       rsp,38
pop       rsi
pop       rdi
ret
mov       rcx,rdi
call      System.MulticastDelegate.ThrowNullThisInDelegateToInstance()
int       3

System.IO.Path.Combine(System.String, System.String)
push      rdi
push      rsi
sub       rsp,28
test      rcx,rcx
je        short 00007FFF60C2E833
test      rdx,rdx
je        short 00007FFF60C2E833
mov       rax,offset System.IO.Path.CombineInternal(System.String, System.String)
add       rsp,28
pop       rsi
pop       rdi
jmp       rax
test      rcx,rcx
je        short 00007FFF60C2E847
mov       rcx,1DF422B1070
mov       rsi,[rcx]
jmp       short 00007FFF60C2E854
mov       rcx,1DF422B1078
mov       rsi,[rcx]
mov       rcx,offset MT_System.ArgumentNullException
call      CORINFO_HELP_NEWSFAST
mov       rdi,rax
mov       rcx,rdi
mov       rdx,rsi
call      System.ArgumentNullException..ctor(System.String)
mov       rcx,rdi
call      CORINFO_HELP_THROW
int       3

dotNetTips.Utility.Standard.IO.FileHelper.FileHasInvalidChars(System.String)
            Encapsulation.TryValidateParam(fileName, nameof(fileName));
            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
            return fileName.IndexOfAny(_invalidFileNameChars) != -1;
            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
push      rsi
sub       rsp,20
mov       rsi,rcx
mov       r8,1DF622B3060
mov       r8,[r8]
mov       rdx,1DF622C1480
mov       rdx,[rdx]
mov       rcx,rsi
call      dotNetTips.Utility.Standard.OOP.Encapsulation.TryValidateParam(System.String, System.String, System.String)
mov       r9,1DF622BBAF0
mov       rdx,[r9]
mov       r9d,[rsi]
mov       r9d,[rsi+8]
mov       rcx,rsi
xor       r8d,r8d
call      System.String.IndexOfAny(Char[], Int32, Int32)
cmp       eax,0FFFFFFFF
setne     al
movzx     eax,al
add       rsp,20
pop       rsi
ret

</code></pre></td>
<td style="vertical-align:top;"><pre><code>
dotNetTips.Utility.Benchmarks.IO.FileHelperPerfTestRunner.MoveFileTest()
            var destFile = RandomData.GenerateRandomFileName();
            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
            var tempFile = RandomData.GenerateTempFile(this._fileLength);
            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
            FileHelper.MoveFile(tempFile, destFile);
            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
push      rdi
push      rsi
sub       rsp,28
mov       rsi,rcx
call      System.IO.Path.GetTempPath()
mov       rdi,rax
call      System.IO.Path.GetRandomFileName()
mov       rdx,rax
mov       rcx,rdi
call      System.IO.Path.Combine(System.String, System.String)
mov       rdi,rax
mov       ecx,[rsi+3C]
call      dotNetTips.Utility.Standard.Tester.RandomData.GenerateTempFile(Int32)
mov       rcx,rax
mov       rdx,rdi
mov       rax,offset dotNetTips.Utility.Standard.IO.FileHelper.MoveFile(System.String, System.String)
add       rsp,28
pop       rsi
pop       rdi
jmp       rax

System.IO.Path.GetTempPath()
push      rbp
push      rdi
push      rsi
sub       rsp,50
vzeroupper
lea       rbp,[rsp+20]
xor       eax,eax
mov       [rbp+10],rax
mov       [rbp+20],rax
mov       rax,0B60B0374F1F2
mov       [rbp+8],rax
add       rsp,20
test      esp,[rsp]
sub       rsp,210
sub       rsp,20
lea       rcx,[rsp+20]
xor       eax,eax
mov       [rbp+10],rax
lea       rax,[rbp+20]
mov       [rax],rcx
mov       dword ptr [rax+8],104
xor       ecx,ecx
mov       [rbp+18],ecx
lea       rcx,[rbp+10]
call      System.IO.Path.GetTempPath(System.Text.ValueStringBuilder ByRef)
lea       rcx,[rbp+10]
call      System.IO.PathHelper.Normalize(System.Text.ValueStringBuilder ByRef)
mov       rsi,rax
mov       rdi,[rbp+10]
lea       rcx,[rbp+10]
vxorps    xmm0,xmm0,xmm0
vmovdqu   xmmword ptr [rcx],xmm0
vmovdqu   xmmword ptr [rcx+10],xmm0
test      rdi,rdi
je        short 00007FFF60C23265
mov       rcx,7FFF60910020
mov       edx,26
call      CORINFO_HELP_CLASSINIT_SHARED_DYNAMICCLASS
mov       rcx,1E5A3708D40
mov       rcx,[rcx]
mov       rdx,rdi
xor       r8d,r8d
cmp       [rcx],ecx
call      qword ptr [7FFF60C2AB40]
mov       rax,rsi
mov       rcx,0B60B0374F1F2
cmp       [rbp+8],rcx
je        short 00007FFF60C2327D
call      CORINFO_HELP_FAIL_FAST
nop
lea       rsp,[rbp+30]
pop       rsi
pop       rdi
pop       rbp
ret

System.IO.Path.GetRandomFileName()
push      rdi
push      rsi
sub       rsp,38
mov       rax,0B60B0374F1F2
mov       [rsp+30],rax
lea       rsi,[rsp+28]
mov       rcx,rsi
mov       edx,8
call      Interop.GetRandomBytes(Byte*, Int32)
mov       rcx,1E5A37022F0
mov       r8,[rcx]
test      r8,r8
jne       short 00007FFF60C236F9
mov       rcx,offset MT_System.Buffers.SpanAction`2[[System.Char, System.Private.CoreLib],[System.IntPtr, System.Private.CoreLib]]
call      CORINFO_HELP_NEWSFAST
mov       rdi,rax
mov       rdx,1E5A37022E8
mov       rdx,[rdx]
test      rdx,rdx
je        short 00007FFF60C23724
lea       rcx,[rdi+8]
call      CORINFO_HELP_ASSIGN_REF
mov       rdx,offset System.IO.Path+<>c.<GetRandomFileName>b__16_0(System.Span`1<Char>, IntPtr)
mov       [rdi+18],rdx
mov       rcx,1E5A37022F0
mov       rdx,rdi
call      CORINFO_HELP_CHECKED_ASSIGN_REF
mov       r8,rdi
mov       ecx,0C
mov       rdx,rsi
call      System.String.Create[[System.IntPtr, System.Private.CoreLib]](Int32, IntPtr, System.Buffers.SpanAction`2<Char,IntPtr>)
mov       rcx,0B60B0374F1F2
cmp       [rsp+30],rcx
je        short 00007FFF60C2371C
call      CORINFO_HELP_FAIL_FAST
nop
add       rsp,38
pop       rsi
pop       rdi
ret
mov       rcx,rdi
call      System.MulticastDelegate.ThrowNullThisInDelegateToInstance()
int       3

System.IO.Path.Combine(System.String, System.String)
push      rdi
push      rsi
sub       rsp,28
test      rcx,rcx
je        short 00007FFF60C23FE3
test      rdx,rdx
je        short 00007FFF60C23FE3
mov       rax,offset System.IO.Path.CombineInternal(System.String, System.String)
add       rsp,28
pop       rsi
pop       rdi
jmp       rax
test      rcx,rcx
je        short 00007FFF60C23FF7
mov       rcx,1E5D3701070
mov       rsi,[rcx]
jmp       short 00007FFF60C24004
mov       rcx,1E5D3701078
mov       rsi,[rcx]
mov       rcx,offset MT_System.ArgumentNullException
call      CORINFO_HELP_NEWSFAST
mov       rdi,rax
mov       rcx,rdi
mov       rdx,rsi
call      System.ArgumentNullException..ctor(System.String)
mov       rcx,rdi
call      CORINFO_HELP_THROW
int       3

dotNetTips.Utility.Standard.Tester.RandomData.GenerateTempFile(Int32)
            Encapsulation.TryValidateParam(fileLength, 1, int.MaxValue, nameof(fileLength));
            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
            var fileName = GenerateRandomFileName();
            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
            var fakeText = GenerateWord(fileLength);
            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
            File.WriteAllText(fileName, fakeText);
            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
            return fileName;
            ^^^^^^^^^^^^^^^^
push      rdi
push      rsi
sub       rsp,28
mov       esi,ecx
mov       rax,1E5A3703060
mov       rdi,[rax]
test      esi,esi
jle       short 00007FFF60C27020
cmp       esi,7FFFFFFF
setle     al
movzx     eax,al
test      eax,eax
je        short 00007FFF60C27020
call      System.IO.Path.GetTempPath()
mov       rdi,rax
call      System.IO.Path.GetRandomFileName()
mov       rdx,rax
mov       rcx,rdi
call      System.IO.Path.Combine(System.String, System.String)
mov       rdi,rax
mov       ecx,esi
call      dotNetTips.Utility.Standard.Tester.RandomData.GenerateWord(Int32)
mov       rdx,rax
mov       rcx,rdi
call      System.IO.File.WriteAllText(System.String, System.String)
mov       rax,rdi
add       rsp,28
pop       rsi
pop       rdi
ret
test      rdi,rdi
jne       short 00007FFF60C2702D
call      dotNetTips.Utility.Standard.Properties.Resources.get_NumberNotInRange()
mov       rdi,rax
mov       rcx,offset MT_System.ArgumentOutOfRangeException
call      CORINFO_HELP_NEWSFAST
mov       rsi,rax
mov       ecx,2F
mov       rdx,7FFF60BF26A8
call      CORINFO_HELP_STRCNS
mov       r8,rax
mov       rdx,rdi
mov       rcx,rsi
call      System.ArgumentOutOfRangeException..ctor(System.String, System.String)
mov       rcx,rsi
call      CORINFO_HELP_THROW
int       3

dotNetTips.Utility.Standard.IO.FileHelper.MoveFile(System.String, System.String)
push      rbp
push      rdi
push      rsi
sub       rsp,30
lea       rbp,[rsp+40]
mov       [rbp+0FFE0],rsp
mov       [rbp+10],rcx
mov       [rbp+18],rdx
            Encapsulation.TryValidateParam(sourceFileName, nameof(sourceFileName));
            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
mov       r8,1E5A3703060
mov       r8,[r8]
mov       rdx,1E5C3701068
mov       rdx,[rdx]
mov       rcx,[rbp+10]
call      dotNetTips.Utility.Standard.OOP.Encapsulation.TryValidateParam(System.String, System.String, System.String)
            Encapsulation.TryValidateParam(destinationFileName, nameof(destinationFileName));
            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
mov       r8,1E5A3703060
mov       r8,[r8]
mov       rdx,1E5C3701070
mov       rdx,[rdx]
mov       rcx,[rbp+18]
call      dotNetTips.Utility.Standard.OOP.Encapsulation.TryValidateParam(System.String, System.String, System.String)
            Encapsulation.TryValidateParam<ArgumentInvalidException>(File.Exists(sourceFileName), nameof(sourceFileName), $"File {sourceFileName} does not exist.");
            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
mov       rcx,[rbp+10]
call      System.IO.File.Exists(System.String)
mov       esi,eax
mov       rcx,1E5C3701068
mov       rdi,[rcx]
mov       rcx,1E5C3701078
mov       rcx,[rcx]
mov       r8,1E5C3701080
mov       r8,[r8]
mov       rdx,[rbp+10]
call      System.String.Concat(System.String, System.String, System.String)
mov       r9,rax
mov       r8,rdi
mov       edx,esi
mov       rcx,offset MD_dotNetTips.Utility.Standard.OOP.Encapsulation.TryValidateParam(Boolean, System.String, System.String)
call      dotNetTips.Utility.Standard.OOP.Encapsulation.TryValidateParam[[System.__Canon, System.Private.CoreLib]](Boolean, System.String, System.String)
            for (var retryCount = 0; retryCount < Retries; retryCount++)
                 ^^^^^^^^^^^^^^^^^^
xor       ecx,ecx
mov       [rbp+0FFEC],ecx
                    File.Move(sourceFileName, destinationFileName);
                    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
mov       rcx,[rbp+10]
mov       rdx,[rbp+18]
xor       r8d,r8d
call      System.IO.File.Move(System.String, System.String, Boolean)
jmp       short 00007FFF60C1BBB4
                Thread.Sleep(( retryCount + 1 ) * 10);
                ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
mov       ecx,[rbp+0FFEC]
inc       ecx
lea       ecx,[rcx+rcx*4]
shl       ecx,1
call      System.Threading.Thread.SleepInternal(Int32)
mov       edx,[rbp+0FFEC]
inc       edx
mov       [rbp+0FFEC],edx
cmp       dword ptr [rbp+0FFEC],0A
jl        short 00007FFF60C1BB85
lea       rsp,[rbp+0FFF0]
pop       rsi
pop       rdi
pop       rbp
ret
push      rbp
push      rdi
push      rsi
sub       rsp,30
mov       rbp,[rcx+20]
mov       [rsp+20],rbp
lea       rbp,[rbp+40]
mov       rcx,offset MT_System.IO.IOException
call      CORINFO_HELP_ISINSTANCEOFCLASS
test      rax,rax
jne       short 00007FFF60C1BBE8
                catch (IOException) when (retryCount < Retries - 1)
                                    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
xor       eax,eax
jmp       short 00007FFF60C1BBFA
cmp       dword ptr [rbp+0FFEC],9
setl      al
movzx     eax,al
test      eax,eax
setne     al
movzx     eax,al
add       rsp,30
pop       rsi
pop       rdi
pop       rbp
ret
push      rbp
push      rdi
push      rsi
sub       rsp,30
mov       rbp,[rcx+20]
mov       [rsp+20],rbp
lea       rbp,[rbp+40]
lea       rax,[7FFF60C2BB97]
add       rsp,30
pop       rsi
pop       rdi
pop       rbp
ret
push      rbp
push      rdi
push      rsi
sub       rsp,30
mov       rbp,[rcx+20]
mov       [rsp+20],rbp
lea       rbp,[rbp+40]
mov       rcx,offset MT_System.UnauthorizedAccessException
call      CORINFO_HELP_ISINSTANCEOFCLASS
test      rax,rax
jne       short 00007FFF60C1BC51
                catch (UnauthorizedAccessException) when (retryCount < Retries - 1)
                                                    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
xor       eax,eax
jmp       short 00007FFF60C1BC63
cmp       dword ptr [rbp+0FFEC],9
setl      al
movzx     eax,al
test      eax,eax
setne     al
movzx     eax,al
add       rsp,30
pop       rsi
pop       rdi
pop       rbp
ret
push      rbp
push      rdi
push      rsi
sub       rsp,30
mov       rbp,[rcx+20]
mov       [rsp+20],rbp
lea       rbp,[rbp+40]
lea       rax,[7FFF60C2BB97]
add       rsp,30
pop       rsi
pop       rdi
pop       rbp
ret

</code></pre></td>
</tr>
</tbody>
</table>
</body>
</html>
